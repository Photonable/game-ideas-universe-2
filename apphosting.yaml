# This file configures the deployment of your Next.js app to Firebase App Hosting.

# Specifies the version of the App Hosting configuration schema.
version: 1

# Specifies the commands to build and run your Next.js application.
run:
  build: npm run build
  start: npm run start

# Defines the runtime resource allocation for your application.
resources:
  cpu: 1
  memoryMiB: 1024

# Defines the environment variables available to your application.
# It is a best practice to load sensitive data from Google Secret Manager.
env:
  # These variables will be populated from secrets stored in Google Secret Manager.
  # The '@' syntax tells App Hosting to fetch the latest version of the secret.
  - variable: FIREBASE_PROJECT_ID
    secret: FIREBASE_PROJECT_ID@latest
  - variable: FIREBASE_CLIENT_EMAIL
    secret: FIREBASE_CLIENT_EMAIL@latest
  - variable: FIREBASE_PRIVATE_KEY
    secret: FIREBASE_PRIVATE_KEY@latest
  - variable: STRIPE_WEBHOOK_SECRET
    secret: STRIPE_WEBHOOK_SECRET@latest
